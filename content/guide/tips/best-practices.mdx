---
title: Best Practices
description: Learn the best practices for developing with Seyfert
---
import { Callout } from 'fumadocs-ui/components/callout';
import { Files, File, Folder } from '@/components/ui/fileTree.tsx';

# Best Practices

This guide covers the recommended practices when developing Discord bots with Seyfert.

## Project Structure

Organize your code following this recommended structure:

<Files>
    <Folder name="src" defaultOpen={true}>
        <Folder name="commands" comment="Command files">
        </Folder>
        <Folder name="components" comment="Component handlers">
        </Folder>
        <Folder name="events" comment="Event handlers">
        </Folder>
        <Folder name="middleware" comment="Middleware functions">
        </Folder>
        <Folder name="utils" comment="Utility functions">
        </Folder>
        <Folder name="config" comment="Configuration files">
        </Folder>
        <File name="index.ts" comment="Entry point" />
    </Folder>
</Files>

## Command Organization

1. **Group Related Commands**
   - Use subcommands for related functionality
   - Keep command files focused and single-purpose

2. **Consistent Naming**
   - Use descriptive names for commands
   - Follow a consistent naming convention

```ts
// Good
@Declare({
    name: 'user-info',
    description: 'Shows information about a user'
})

// Avoid
@Declare({
    name: 'ui',
    description: 'info'
})
```

## Error Handling

1. **Use Built-in Error Handlers**
   - Implement `onRunError` for command errors
   - Use `onMiddlewaresError` for middleware failures
   - Handle `onOptionsError` for option validation

2. **Graceful Error Messages**
   - Provide clear error messages to users
   - Log detailed errors for debugging

```ts
async onRunError(ctx: CommandContext, error: unknown) {
    // Log for debugging
    ctx.client.logger.error(error);
    
    // User-friendly message
    await ctx.editOrReply({
        content: 'Something went wrong. Please try again later.',
        flags: MessageFlags.Ephemeral
    });
}
```

## Performance

1. **Cache Management**
   - Use caching for frequently accessed data
   - Implement proper cache invalidation

2. **Resource Usage**
   - Minimize API calls
   - Use collectors with appropriate timeouts
   - Clean up resources when no longer needed

## Security

1. **Input Validation**
   - Validate all user inputs
   - Use option validators effectively

2. **Permission Handling**
   - Always check permissions before actions
   - Use `defaultMemberPermissions` appropriately

```ts
@Declare({
    name: 'kick',
    description: 'Kick a user',
    defaultMemberPermissions: ['KickMembers']
})
```

## Component Handling

1. **Organized Component IDs**
   - Use consistent naming for custom IDs
   - Consider namespacing for different features

2. **Timeout Management**
   - Set appropriate collector timeouts
   - Clean up components when no longer needed

## Testing

1. **Command Testing**
   - Test command logic separately
   - Mock Discord API responses

2. **Error Cases**
   - Test error handling
   - Verify permission checks

## Deployment

1. **Environment Management**
   - Use environment variables
   - Keep sensitive data secure

2. **Monitoring**
   - Implement proper logging
   - Monitor bot performance

<Callout type="tip">
Remember to regularly update your dependencies and check for breaking changes in new versions.
</Callout>

## Common Anti-patterns to Avoid

1. **Global State**
   - Avoid using global variables
   - Use proper state management

2. **Callback Hell**
   - Use async/await
   - Keep code flat and readable

3. **Hard-coded Values**
   - Use configuration files
   - Make values configurable

4. **Ignoring Types**
   - Leverage TypeScript's type system
   - Define proper interfaces

## Documentation

1. **Code Documentation**
   - Document complex logic
   - Use JSDoc for public APIs

2. **User Documentation**
   - Provide clear command usage examples
   - Document configuration options

## Maintenance

1. **Regular Updates**
   - Keep dependencies updated
   - Review and refactor code regularly

2. **Monitoring**
   - Implement proper error tracking
   - Monitor bot performance

<Callout>
These best practices are guidelines. Adapt them to your specific needs while maintaining code quality and performance.
</Callout> 